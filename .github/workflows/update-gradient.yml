name: Update Gradient

on:
  workflow_dispatch:

jobs:
  update:
    runs-on: ubuntu-latest
    
    steps:
    - uses: actions/checkout@v4
    
    - name: Setup Python
      uses: actions/setup-python@v4
      with:
        python-version: '3.9'
        
    - name: Test basic functionality
      run: |
        # 简单测试 - 先不修改README，只测试颜色生成
        config=$(cat config.json)
        colors=$(echo $config | python3 -c "import json,sys;data=json.load(sys.stdin);print(' '.join(data['gradient']['candidate_colors'][:2]))")
        echo "测试颜色: $colors"
        
        # 测试颜色调整
        result=$(python3 adjust_colors.py "$colors" 1.0)
        echo "调整后颜色: $result"
        
    - name: Show current README
      run: |
        echo "当前README内容:"
        grep -A 2 -B 2 "capsule-render" README.md
